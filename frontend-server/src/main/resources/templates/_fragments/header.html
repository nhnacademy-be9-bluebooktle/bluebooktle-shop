<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<header class="site-header-kitsch" th:fragment="headerFragment">
    <div class="container-kitsch">
        <div class="header-flex-kitsch">
            <a class="logo-link-kitsch" href="/" th:href="@{/}">
                <h1 class="logo-main-kitsch display-font-kitsch">Blue<span class="logo-alt-color-kitsch">Book</span>tle
                </h1>
                <p class="logo-sub-kitsch handwriting-font-kitsch">당신을 위한 서점</p>
            </a>

            <form action="/books" class="header-search-form-kitsch" method="get" th:action="@{/books}">
                <input class="input-kitsch header-search-input-kitsch" name="query" placeholder="레트로 감성 책 검색!"
                       type="text" value="판타지">
                <button class="btn-kitsch primary-btn-kitsch header-search-btn-kitsch" type="submit">
                    <i class="fas fa-search"></i>
                </button>
            </form>

            <div class="user-actions-kitsch logged-in-actions-kitsch" th:if="${isLoggedIn}">
                <a class="btn-kitsch secondary-btn-kitsch color3-kitsch retro-shadow-kitsch-small cart-btn-header-kitsch"
                   href="/cart" th:href="@{/cart}">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count-kitsch">3</span> </a>

                <a th:if="${userType == 'ADMIN'}"
                   class="btn-kitsch secondary-btn-kitsch color1-kitsch retro-shadow-kitsch-small"
                   th:href="@{/admin/dashboard}"> <i class="fas fa-cogs"></i>
                    <span th:text="${userNickname != null ? userNickname : '관리자님'}"></span>
                </a>

                <a class="btn-kitsch secondary-btn-kitsch color1-kitsch retro-shadow-kitsch-small"
                   th:href="@{/mypage/profile}">
                    <i class="fas fa-user-astronaut"></i>
                    <span th:text="마이페이지"></span>
                </a>

                <form th:action="@{/logout}" method="post" style="display: inline;">
                    <button type="submit"
                            class="btn-kitsch secondary-btn-kitsch color4-kitsch retro-shadow-kitsch-small logout-button-as-link">
                        <i class="fas fa-sign-out-alt"></i> 로그아웃
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="header-marquee-kitsch" th:if="${isLoggedIn}">
        <p class="pixel-font-kitsch" th:if="${userNickname != null}"
           th:text="'🎉 ' + ${userNickname} + '님, 오늘은 책을 찾아볼까요? 👾 쿠폰 이벤트 확인!'"></p>
        <p class="pixel-font-kitsch" th:if="${userNickname == null}"
           th:text="'🎉 회원님, 오늘은 어떤 책을 찾아볼까요? 👾 쿠폰 이벤트 확인!'"></p>
    </div>
</header>

<header class="site-header-kitsch" th:fragment="headerFragmentLoggedOut">
    <div class="container-kitsch">
        <div class="header-flex-kitsch">
            <a class="logo-link-kitsch" href="/" th:href="@{/}">
                <h1 class="logo-main-kitsch display-font-kitsch">Blue<span class="logo-alt-color-kitsch">Book</span>tle
                </h1>
                <p class="logo-sub-kitsch handwriting-font-kitsch">당신을 위한 서점</p>
            </a>

            <form action="/books" class="header-search-form-kitsch" method="get" th:action="@{/books}">
                <input class="input-kitsch header-search-input-kitsch" name="query" placeholder="어떤 책을 찾으세요?"
                       type="text">
                <button class="btn-kitsch primary-btn-kitsch header-search-btn-kitsch" type="submit">
                    <i class="fas fa-search"></i>
                </button>
            </form>

            <div class="user-actions-kitsch">
                <a class="btn-kitsch secondary-btn-kitsch color3-kitsch retro-shadow-kitsch-small cart-btn-header-kitsch"
                   href="/cart" th:href="@{/cart}">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count-kitsch">3</span> </a>
                <a class="btn-kitsch secondary-btn-kitsch color5-kitsch retro-shadow-kitsch-small" href="/login"
                   th:href="@{/login}"><i class="fas fa-sign-in-alt"></i> 로그인</a>
                <a class="btn-kitsch primary-btn-kitsch retro-shadow-kitsch-small" href="/signup"
                   th:href="@{/signup}"><i class="fas fa-user-plus"></i> 회원가입</a>
            </div>
        </div>
    </div>
    <div class="header-marquee-kitsch">
        <p class="pixel-font-kitsch">✨ BlueBooktle에 오신 것을 환영합니다! 신간 도서 & 이벤트 확인! ✨</p>
    </div>
</header>

</body>
</html>